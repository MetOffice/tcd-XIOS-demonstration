# this environment management script needs to be sourced in order to provide
# equivalent functionality on Archer2 to the Github CI environment.
# `. archerEnv`

module load cray-hdf5-parallel
module load cray-netcdf-hdf5parallel
module load cray-python

export NETCDF_LIBDIR=-L/opt/cray/pe/netcdf-hdf5parallel/4.9.0.1/crayclang/14.0/lib
export NETCDF_INCDIR=-I/opt/cray/pe/netcdf-hdf5parallel/4.9.0.1/include/

# provide explicit paths to all XIOS components
export XIOS_INCDIR=/work/n02/n02/marqh/metofficegit/tcd-XIOS3-extras/inc
export XIOS_LIBDIR=/work/n02/n02/marqh/metofficegit/tcd-XIOS3-extras/lib
export XIOS_BINDIR=/work/n02/n02/marqh/metofficegit/tcd-XIOS3-extras/bin

# netCDF4 python installed via pip into --user

# set env variable for run switching (mpiexec / srun) and iodef patching (transport)
export PLATFORM=Archer2
export MVER=XIOS3/trunk
# start interative session
salloc --nodes=2 --ntasks-per-node=8 --cpus-per-task=1 --time=00:15:00 --partition=standard --qos=short --account=n02-cms